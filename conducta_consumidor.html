import React, { useState } from 'react';
import { 
  AlertTriangle, 
  ShieldCheck, 
  Clock, 
  Wallet, 
  Users, 
  HelpCircle,
  ArrowRight,
  ThumbsUp,
  XCircle,
  Search,
  MessageCircle,
  Lock
} from 'lucide-react';

export default function InfografiaConducta() {
  const [activeStep, setActiveStep] = useState(0);

  const steps = [
    {
      id: 0,
      title: "1. El Disparador (Trigger)",
      icon: <AlertTriangle className="w-8 h-8 text-yellow-500" />,
      description: "¿Qué motiva al propietario a buscar una solución?",
      details: [
        { label: "Urgencia", text: "El huésped llega a las 2 AM y no hay nadie para recibirlo." },
        { label: "Falla Informal", text: "El encargado del edificio ya no quiere/puede guardar las llaves." },
        { label: "Inseguridad", text: "Miedo a copias de llaves no autorizadas tras una mala experiencia." }
      ]
    },
    {
      id: 1,
      title: "2. La Comparación de Opciones",
      icon: <Search className="w-8 h-8 text-blue-500" />,
      description: "El dilema: ¿Gratis/Barato vs. Profesional?",
      comparison: true
    },
    {
      id: 2,
      title: "3. Barreras y Miedos",
      icon: <Lock className="w-8 h-8 text-red-500" />,
      description: "¿Qué frena la contratación de la App?",
      details: [
        { label: "Tecnología", text: "'¿Y si se corta la luz o el WiFi y el huésped queda afuera?'" },
        { label: "Confianza", text: "'¿Quiénes son estos 'Hosts Locales'? ¿Son empleados o extraños?'" },
        { label: "Costo Percibido", text: "'Es más caro que darle una propina al portero.'" }
      ]
    },
    {
      id: 3,
      title: "4. Factores de Decisión Final",
      icon: <ThumbsUp className="w-8 h-8 text-green-500" />,
      description: "¿Qué inclina la balanza hacia Alfred?",
      details: [
        { label: "Trazabilidad", text: "Saber exactamente quién entró y a qué hora (Log digital)." },
        { label: "Independencia", text: "No 'deber favores' a vecinos o familiares." },
        { label: "Profesionalismo", text: "Seguro y factura (Compliance fiscal)." }
      ]
    }
  ];

  return (
    <div className="flex flex-col min-h-screen bg-slate-50 font-sans text-slate-800 p-4 md:p-8">
      
      {/* Header */}
      <header className="mb-8 text-center bg-white p-6 rounded-2xl shadow-sm border border-slate-200">
        <h1 className="text-3xl md:text-4xl font-extrabold text-slate-900 mb-2">
          Psicología del Propietario <span className="text-blue-600">Argentino</span>
        </h1>
        <p className="text-lg text-slate-600">
          Análisis de la conducta de compra: App vs. Informalidad en el AMBA y la Costa.
        </p>
      </header>

      {/* Main Content Layout */}
      <div className="flex flex-col lg:flex-row gap-8 max-w-7xl mx-auto w-full">
        
        {/* Left Column: Interactive Steps */}
        <div className="lg:w-1/3 flex flex-col gap-4">
          {steps.map((step, index) => (
            <button
              key={step.id}
              onClick={() => setActiveStep(index)}
              className={`text-left p-6 rounded-xl transition-all duration-300 border-2 flex items-center gap-4 group ${
                activeStep === index 
                  ? 'bg-blue-600 border-blue-600 text-white shadow-lg scale-105' 
                  : 'bg-white border-slate-200 hover:border-blue-300 hover:bg-slate-50'
              }`}
            >
              <div className={`p-3 rounded-full ${activeStep === index ? 'bg-white/20' : 'bg-slate-100'}`}>
                {React.cloneElement(step.icon as React.ReactElement, { className: `w-6 h-6 ${activeStep === index ? 'text-white' : ''}` })}
              </div>
              <div>
                <h3 className={`font-bold text-lg ${activeStep === index ? 'text-white' : 'text-slate-800'}`}>
                  {step.title}
                </h3>
                <p className={`text-sm ${activeStep === index ? 'text-blue-100' : 'text-slate-500'}`}>
                   Click para ver detalles
                </p>
              </div>
              <ArrowRight className={`ml-auto w-5 h-5 transition-transform ${activeStep === index ? 'text-white translate-x-1' : 'text-slate-300'}`} />
            </button>
          ))}
        </div>

        {/* Right Column: Visualization Area */}
        <div className="lg:w-2/3 bg-white rounded-3xl shadow-xl border border-slate-100 p-8 min-h-[500px] flex flex-col animate-fadeIn relative overflow-hidden">
          
          {/* Background decoration */}
          <div className="absolute top-0 right-0 w-64 h-64 bg-blue-50 rounded-full blur-3xl -z-0 opacity-50 translate-x-1/3 -translate-y-1/3"></div>

          <div className="z-10 h-full flex flex-col">
            <div className="flex items-center gap-4 mb-6 pb-6 border-b border-slate-100">
              <div className="p-4 bg-blue-50 rounded-2xl">
                {steps[activeStep].icon}
              </div>
              <div>
                <h2 className="text-3xl font-bold text-slate-800">{steps[activeStep].title}</h2>
                <p className="text-xl text-slate-500">{steps[activeStep].description}</p>
              </div>
            </div>

            {/* Content Rendering based on step */}
            <div className="flex-1">
              
              {/* Step 1, 3, 4: List/Cards View */}
              {!steps[activeStep].comparison && steps[activeStep].details && (
                <div className="grid md:grid-cols-1 gap-4">
                  {steps[activeStep].details.map((item, idx) => (
                    <div key={idx} className="bg-slate-50 p-6 rounded-xl border-l-4 border-blue-500 hover:bg-blue-50 transition-colors">
                      <h4 className="font-bold text-lg text-blue-800 mb-2">{item.label}</h4>
                      <p className="text-slate-700 text-lg leading-relaxed">{item.text}</p>
                    </div>
                  ))}
                </div>
              )}

              {/* Step 2: Comparison View (The core of the request) */}
              {steps[activeStep].comparison && (
                <div className="grid md:grid-cols-2 gap-6 h-full">
                  
                  {/* Option A: Informal */}
                  <div className="bg-red-50 rounded-2xl p-6 border border-red-100 flex flex-col">
                    <div className="flex items-center justify-between mb-4">
                      <h3 className="text-xl font-bold text-red-800">Opción Informal</h3>
                      <XCircle className="text-red-400" />
                    </div>
                    <div className="space-y-4 flex-1">
                      <div className="bg-white/60 p-3 rounded-lg">
                        <span className="font-bold text-sm block text-red-700 uppercase">Proveedor</span>
                        <span className="text-slate-700">Portero, Vecino, Amigo.</span>
                      </div>
                      <div className="bg-white/60 p-3 rounded-lg">
                        <span className="font-bold text-sm block text-red-700 uppercase">Costo</span>
                        <span className="text-slate-700">Propina / Favor personal.</span>
                      </div>
                      <div className="bg-white/60 p-3 rounded-lg">
                        <span className="font-bold text-sm block text-red-700 uppercase">Confianza</span>
                        <span className="text-slate-700">Alta en la persona, <span className="font-bold">Baja en el proceso</span> (si se duerme, falla).</span>
                      </div>
                      <div className="bg-white/60 p-3 rounded-lg">
                         <span className="font-bold text-sm block text-red-700 uppercase">Riesgo</span>
                         <span className="text-slate-700">Sin seguro, sin registro de llaves.</span>
                      </div>
                    </div>
                  </div>

                  {/* Option B: Alfred */}
                  <div className="bg-green-50 rounded-2xl p-6 border border-green-100 flex flex-col shadow-sm">
                    <div className="flex items-center justify-between mb-4">
                      <h3 className="text-xl font-bold text-green-800">Opción App (Alfred)</h3>
                      <ShieldCheck className="text-green-500" />
                    </div>
                     <div className="space-y-4 flex-1">
                      <div className="bg-white/60 p-3 rounded-lg">
                        <span className="font-bold text-sm block text-green-700 uppercase">Proveedor</span>
                        <span className="text-slate-700">Host Verificado + IoT.</span>
                      </div>
                      <div className="bg-white/60 p-3 rounded-lg">
                        <span className="font-bold text-sm block text-green-700 uppercase">Costo</span>
                        <span className="text-slate-700">Suscripción mensual (predecible).</span>
                      </div>
                      <div className="bg-white/60 p-3 rounded-lg">
                        <span className="font-bold text-sm block text-green-700 uppercase">Confianza</span>
                        <span className="text-slate-700">Basada en <span className="font-bold">SLA y Marca</span>. Respaldo corporativo.</span>
                      </div>
                      <div className="bg-white/60 p-3 rounded-lg">
                         <span className="font-bold text-sm block text-green-700 uppercase">Beneficio</span>
                         <span className="text-slate-700">Seguro incluido, Trazabilidad digital.</span>
                      </div>
                    </div>
                  </div>

                </div>
              )}

            </div>
          </div>
        </div>
      </div>

      <style>{`
        @keyframes fadeIn {
          from { opacity: 0; transform: translateY(10px); }
          to { opacity: 1; transform: translateY(0); }
        }
        .animate-fadeIn {
          animation: fadeIn 0.4s ease-out forwards;
        }
      `}</style>
    </div>
  );
}